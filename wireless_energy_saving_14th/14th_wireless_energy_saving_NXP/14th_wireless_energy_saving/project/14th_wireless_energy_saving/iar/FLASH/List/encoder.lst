###############################################################################
#
# IAR ANSI C/C++ Compiler V7.70.1.11437/W32 for ARM       08/Jul/2019  02:42:58
# Copyright 1999-2016 IAR Systems AB.
#
#    Cpu mode     =  thumb
#    Endian       =  little
#    Source file  =  
#        D:\Freescale\无线节能14th\wireless_energy_saving_14th\14th_wireless_energy_saving_NXP\14th_wireless_energy_saving\project\14th_wireless_energy_saving\app\device\src\encoder.c
#    Command line =  
#        D:\Freescale\无线节能14th\wireless_energy_saving_14th\14th_wireless_energy_saving_NXP\14th_wireless_energy_saving\project\14th_wireless_energy_saving\app\device\src\encoder.c
#        -D LPLD_K60 -lCN
#        D:\Freescale\无线节能14th\wireless_energy_saving_14th\14th_wireless_energy_saving_NXP\14th_wireless_energy_saving\project\14th_wireless_energy_saving\iar\FLASH\List
#        -lB
#        D:\Freescale\无线节能14th\wireless_energy_saving_14th\14th_wireless_energy_saving_NXP\14th_wireless_energy_saving\project\14th_wireless_energy_saving\iar\FLASH\List
#        -o
#        D:\Freescale\无线节能14th\wireless_energy_saving_14th\14th_wireless_energy_saving_NXP\14th_wireless_energy_saving\project\14th_wireless_energy_saving\iar\FLASH\Obj
#        --no_cse --no_unroll --no_inline --no_code_motion --no_tbaa
#        --no_clustering --no_scheduling --debug --endian=little
#        --cpu=Cortex-M4 -e --fpu=None --dlib_config "D:\Program Files
#        (x86)\IAR Systems\Embedded Workbench
#        7.5\arm\INC\c\DLib_Config_Normal.h" -I
#        D:\Freescale\无线节能14th\wireless_energy_saving_14th\14th_wireless_energy_saving_NXP\14th_wireless_energy_saving\project\14th_wireless_energy_saving\iar\..\app\
#        -I
#        D:\Freescale\无线节能14th\wireless_energy_saving_14th\14th_wireless_energy_saving_NXP\14th_wireless_energy_saving\project\14th_wireless_energy_saving\iar\..\..\..\lib\CPU\
#        -I
#        D:\Freescale\无线节能14th\wireless_energy_saving_14th\14th_wireless_energy_saving_NXP\14th_wireless_energy_saving\project\14th_wireless_energy_saving\iar\..\..\..\lib\common\
#        -I
#        D:\Freescale\无线节能14th\wireless_energy_saving_14th\14th_wireless_energy_saving_NXP\14th_wireless_energy_saving\project\14th_wireless_energy_saving\iar\..\..\..\lib\LPLD\
#        -I
#        D:\Freescale\无线节能14th\wireless_energy_saving_14th\14th_wireless_energy_saving_NXP\14th_wireless_energy_saving\project\14th_wireless_energy_saving\iar\..\..\..\lib\LPLD\HW\
#        -I
#        D:\Freescale\无线节能14th\wireless_energy_saving_14th\14th_wireless_energy_saving_NXP\14th_wireless_energy_saving\project\14th_wireless_energy_saving\iar\..\..\..\lib\LPLD\DEV\
#        -I
#        D:\Freescale\无线节能14th\wireless_energy_saving_14th\14th_wireless_energy_saving_NXP\14th_wireless_energy_saving\project\14th_wireless_energy_saving\iar\..\..\..\lib\uCOS-II\Ports\
#        -I
#        D:\Freescale\无线节能14th\wireless_energy_saving_14th\14th_wireless_energy_saving_NXP\14th_wireless_energy_saving\project\14th_wireless_energy_saving\iar\..\..\..\lib\uCOS-II\Source\
#        -I
#        D:\Freescale\无线节能14th\wireless_energy_saving_14th\14th_wireless_energy_saving_NXP\14th_wireless_energy_saving\project\14th_wireless_energy_saving\iar\..\..\..\lib\FatFs\
#        -I
#        D:\Freescale\无线节能14th\wireless_energy_saving_14th\14th_wireless_energy_saving_NXP\14th_wireless_energy_saving\project\14th_wireless_energy_saving\iar\..\..\..\lib\FatFs\option\
#        -I
#        D:\Freescale\无线节能14th\wireless_energy_saving_14th\14th_wireless_energy_saving_NXP\14th_wireless_energy_saving\project\14th_wireless_energy_saving\iar\..\..\..\lib\USB\common\
#        -I
#        D:\Freescale\无线节能14th\wireless_energy_saving_14th\14th_wireless_energy_saving_NXP\14th_wireless_energy_saving\project\14th_wireless_energy_saving\iar\..\..\..\lib\USB\driver\
#        -I
#        D:\Freescale\无线节能14th\wireless_energy_saving_14th\14th_wireless_energy_saving_NXP\14th_wireless_energy_saving\project\14th_wireless_energy_saving\iar\..\..\..\lib\USB\descriptor\
#        -I
#        D:\Freescale\无线节能14th\wireless_energy_saving_14th\14th_wireless_energy_saving_NXP\14th_wireless_energy_saving\project\14th_wireless_energy_saving\iar\..\..\..\lib\USB\class\
#        -I
#        D:\Freescale\无线节能14th\wireless_energy_saving_14th\14th_wireless_energy_saving_NXP\14th_wireless_energy_saving\project\14th_wireless_energy_saving\iar\..\app\control\inc\
#        -I
#        D:\Freescale\无线节能14th\wireless_energy_saving_14th\14th_wireless_energy_saving_NXP\14th_wireless_energy_saving\project\14th_wireless_energy_saving\iar\..\app\debug\inc\
#        -I
#        D:\Freescale\无线节能14th\wireless_energy_saving_14th\14th_wireless_energy_saving_NXP\14th_wireless_energy_saving\project\14th_wireless_energy_saving\iar\..\app\device\inc\
#        -I
#        D:\Freescale\无线节能14th\wireless_energy_saving_14th\14th_wireless_energy_saving_NXP\14th_wireless_energy_saving\project\14th_wireless_energy_saving\iar\..\app\signal\inc\
#        -I
#        D:\Freescale\无线节能14th\wireless_energy_saving_14th\14th_wireless_energy_saving_NXP\14th_wireless_energy_saving\project\14th_wireless_energy_saving\iar\..\app\system\inc\
#        -I
#        D:\Freescale\无线节能14th\wireless_energy_saving_14th\14th_wireless_energy_saving_NXP\14th_wireless_energy_saving\project\14th_wireless_energy_saving\iar\..\app\control\src\
#        -I
#        D:\Freescale\无线节能14th\wireless_energy_saving_14th\14th_wireless_energy_saving_NXP\14th_wireless_energy_saving\project\14th_wireless_energy_saving\iar\..\app\debug\src\
#        -I
#        D:\Freescale\无线节能14th\wireless_energy_saving_14th\14th_wireless_energy_saving_NXP\14th_wireless_energy_saving\project\14th_wireless_energy_saving\iar\..\app\device\src\
#        -I
#        D:\Freescale\无线节能14th\wireless_energy_saving_14th\14th_wireless_energy_saving_NXP\14th_wireless_energy_saving\project\14th_wireless_energy_saving\iar\..\app\signal\src\
#        -I
#        D:\Freescale\无线节能14th\wireless_energy_saving_14th\14th_wireless_energy_saving_NXP\14th_wireless_energy_saving\project\14th_wireless_energy_saving\iar\..\app\system\src\
#        -I
#        D:\Freescale\无线节能14th\wireless_energy_saving_14th\14th_wireless_energy_saving_NXP\14th_wireless_energy_saving\project\14th_wireless_energy_saving\iar\..\app\drivers\inc\
#        -I
#        D:\Freescale\无线节能14th\wireless_energy_saving_14th\14th_wireless_energy_saving_NXP\14th_wireless_energy_saving\project\14th_wireless_energy_saving\iar\..\app\drivers\src\
#        -I
#        D:\Freescale\无线节能14th\wireless_energy_saving_14th\14th_wireless_energy_saving_NXP\14th_wireless_energy_saving\project\14th_wireless_energy_saving\iar\..\app\charge\inc\
#        -I
#        D:\Freescale\无线节能14th\wireless_energy_saving_14th\14th_wireless_energy_saving_NXP\14th_wireless_energy_saving\project\14th_wireless_energy_saving\iar\..\app\charge\src\
#        -I
#        D:\Freescale\无线节能14th\wireless_energy_saving_14th\14th_wireless_energy_saving_NXP\14th_wireless_energy_saving\project\14th_wireless_energy_saving\iar\..\..\..\lib\LPLD\FUNC\
#        -Ol -I "D:\Program Files (x86)\IAR Systems\Embedded Workbench
#        7.5\arm\CMSIS\Include\" -D ARM_MATH_CM4
#    Locale       =  Chinese (Simplified)_China.936
#    List file    =  
#        D:\Freescale\无线节能14th\wireless_energy_saving_14th\14th_wireless_energy_saving_NXP\14th_wireless_energy_saving\project\14th_wireless_energy_saving\iar\FLASH\List\encoder.lst
#    Object file  =  
#        D:\Freescale\无线节能14th\wireless_energy_saving_14th\14th_wireless_energy_saving_NXP\14th_wireless_energy_saving\project\14th_wireless_energy_saving\iar\FLASH\Obj\encoder.o
#
###############################################################################

D:\Freescale\无线节能14th\wireless_energy_saving_14th\14th_wireless_energy_saving_NXP\14th_wireless_energy_saving\project\14th_wireless_energy_saving\app\device\src\encoder.c
      1          /*=============================================
      2              @file         encoder.c
      3              @brief        编码器测速
      4              @programmer   Beyond Hsueh
      5          =============================================*/
      6          
      7          #include "encoder.h"
      8          
      9          /*===============================================================
     10                  @note      甚矣吾衰矣。怅平生、交游零落，只今余几。
     11                             白发空垂三千丈，一笑人间万事。
     12                             问何物、能令公喜。
     13                             我见青山多妩媚，料青山、见我应如是。情与貌，略相似。
     14                             一尊搔首东窗里。想渊明、停云诗就，此时风味。
     15                             江左沈酣求名者，岂识浊醪妙理。
     16                             回首叫、云飞风起。
     17                             不恨古人吾不见，恨古人、不见吾狂耳。知我者，二三子。
     18          ==================================================================*/
     19          
     20          /*===============================================================
     21          	@brief     由当前脉冲计数获取速度值
     22          	@note      脉冲计数滤波当前采取移动平均滤波，后期尝试巴斯沃特数字滤波
     23          ==================================================================*/

   \                                 In section .text, align 2, keep-with-next
     24          void Get_Right_Speed()
     25          {
   \                     Get_Right_Speed: (+1)
   \   00000000   0xB510             PUSH     {R4,LR}
     26              uint8 pulse_loop;
     27              int16 pulse_temp_r;
     28              int16 pulsesum_r = 0;
   \   00000002   0x2400             MOVS     R4,#+0
     29              float pulse_r;
     30              static int16 rightspeed_queue[MOVINGAVERAGE_NUM]={0};
     31              static uint8 position=0;
     32              static uint8 init_flag = 0;
     33              /*用滑动平均法求得当前速度*/
     34              
     35          //    //节能一号
     36          //    pulse_temp_r = PLACC_GPT_cnv();  //记录当前采得的脉冲数
     37              
     38              //节能二号
     39              pulse_temp_r = -PLACC_GPT_cnv();  //记录当前采得的脉冲数
   \   00000004   0x.... 0x....      BL       PLACC_GPT_cnv
   \   00000008   0x4241             RSBS     R1,R0,#+0
     40              
     41              if(init_flag == 0)
   \   0000000A   0x....             LDR.N    R0,??DataTable3
   \   0000000C   0x7800             LDRB     R0,[R0, #+0]
   \   0000000E   0x2800             CMP      R0,#+0
   \   00000010   0xD10D             BNE.N    ??Get_Right_Speed_0
     42              {
     43                  for(pulse_loop = 0;pulse_loop<MOVINGAVERAGE_NUM; pulse_loop++)
   \   00000012   0x2000             MOVS     R0,#+0
   \   00000014   0xE004             B.N      ??Get_Right_Speed_1
     44                  {
     45                      rightspeed_queue[pulse_loop] = pulse_temp_r;
   \                     ??Get_Right_Speed_2: (+1)
   \   00000016   0x....             LDR.N    R2,??DataTable3_1
   \   00000018   0xB2C0             UXTB     R0,R0            ;; ZeroExt  R0,R0,#+24,#+24
   \   0000001A   0xF822 0x1010      STRH     R1,[R2, R0, LSL #+1]
     46                  }
   \   0000001E   0x1C40             ADDS     R0,R0,#+1
   \                     ??Get_Right_Speed_1: (+1)
   \   00000020   0xB2C0             UXTB     R0,R0            ;; ZeroExt  R0,R0,#+24,#+24
   \   00000022   0x2804             CMP      R0,#+4
   \   00000024   0xDBF7             BLT.N    ??Get_Right_Speed_2
     47                  init_flag = 1;
   \   00000026   0x2001             MOVS     R0,#+1
   \   00000028   0x....             LDR.N    R1,??DataTable3
   \   0000002A   0x7008             STRB     R0,[R1, #+0]
   \   0000002C   0xE011             B.N      ??Get_Right_Speed_3
     48              }
     49              else
     50              {
     51                  rightspeed_queue[position] = pulse_temp_r;
   \                     ??Get_Right_Speed_0: (+1)
   \   0000002E   0x....             LDR.N    R0,??DataTable3_1
   \   00000030   0x....             LDR.N    R2,??DataTable3_2
   \   00000032   0x7812             LDRB     R2,[R2, #+0]
   \   00000034   0xF820 0x1012      STRH     R1,[R0, R2, LSL #+1]
     52                  if(position == (MOVINGAVERAGE_NUM-1))
   \   00000038   0x....             LDR.N    R0,??DataTable3_2
   \   0000003A   0x7800             LDRB     R0,[R0, #+0]
   \   0000003C   0x2803             CMP      R0,#+3
   \   0000003E   0xD103             BNE.N    ??Get_Right_Speed_4
     53                  {
     54                      position = 0;
   \   00000040   0x2000             MOVS     R0,#+0
   \   00000042   0x....             LDR.N    R1,??DataTable3_2
   \   00000044   0x7008             STRB     R0,[R1, #+0]
   \   00000046   0xE004             B.N      ??Get_Right_Speed_3
     55                  }
     56                  else
     57                  {
     58                      position ++;
   \                     ??Get_Right_Speed_4: (+1)
   \   00000048   0x....             LDR.N    R0,??DataTable3_2
   \   0000004A   0x7800             LDRB     R0,[R0, #+0]
   \   0000004C   0x1C40             ADDS     R0,R0,#+1
   \   0000004E   0x....             LDR.N    R1,??DataTable3_2
   \   00000050   0x7008             STRB     R0,[R1, #+0]
     59                  }
     60              }
     61              for(pulse_loop = 0;pulse_loop<MOVINGAVERAGE_NUM; pulse_loop++)
   \                     ??Get_Right_Speed_3: (+1)
   \   00000052   0x2000             MOVS     R0,#+0
   \   00000054   0xE005             B.N      ??Get_Right_Speed_5
     62              {
     63                  pulsesum_r += rightspeed_queue[pulse_loop];
   \                     ??Get_Right_Speed_6: (+1)
   \   00000056   0x....             LDR.N    R1,??DataTable3_1
   \   00000058   0xB2C0             UXTB     R0,R0            ;; ZeroExt  R0,R0,#+24,#+24
   \   0000005A   0xF831 0x1010      LDRH     R1,[R1, R0, LSL #+1]
   \   0000005E   0x190C             ADDS     R4,R1,R4
     64              }
   \   00000060   0x1C40             ADDS     R0,R0,#+1
   \                     ??Get_Right_Speed_5: (+1)
   \   00000062   0xB2C0             UXTB     R0,R0            ;; ZeroExt  R0,R0,#+24,#+24
   \   00000064   0x2804             CMP      R0,#+4
   \   00000066   0xDBF6             BLT.N    ??Get_Right_Speed_6
     65              
     66              gl_right_encoder_count += pulsesum_r;
   \   00000068   0x....             LDR.N    R0,??DataTable3_3
   \   0000006A   0x6800             LDR      R0,[R0, #+0]
   \   0000006C   0xFA00 0xF084      SXTAH    R0,R0,R4
   \   00000070   0x....             LDR.N    R1,??DataTable3_3
   \   00000072   0x6008             STR      R0,[R1, #+0]
     67              
     68              pulse_r = (float)pulsesum_r/MOVINGAVERAGE_NUM;
   \   00000074   0xB224             SXTH     R4,R4            ;; SignExt  R4,R4,#+16,#+16
   \   00000076   0x0020             MOVS     R0,R4
   \   00000078   0x.... 0x....      BL       __aeabi_i2f
   \   0000007C   0xF05F 0x4181      MOVS     R1,#+1082130432
   \   00000080   0x.... 0x....      BL       __aeabi_fdiv
     69          
     70              gf_right_speed = pulse_r/(float)(PULSE_PER_METRE_R*SPD_UPDATE_PERIOD_S);     
   \   00000084   0x....             LDR.N    R1,??DataTable3_4  ;; 0x43783c6a
   \   00000086   0x.... 0x....      BL       __aeabi_fdiv
   \   0000008A   0x....             LDR.N    R1,??DataTable3_5
   \   0000008C   0x6008             STR      R0,[R1, #+0]
     71              
     72          }
   \   0000008E   0xBD10             POP      {R4,PC}          ;; return

   \                                 In section .bss, align 4
   \                     `Get_Right_Speed::rightspeed_queue`:
   \   00000000                      DS8 8

   \                                 In section .bss, align 1
   \                     `Get_Right_Speed::position`:
   \   00000000                      DS8 1

   \                                 In section .bss, align 1
   \                     `Get_Right_Speed::init_flag`:
   \   00000000                      DS8 1
     73          

   \                                 In section .text, align 2, keep-with-next
     74          void Get_Left_Speed()
     75          {
   \                     Get_Left_Speed: (+1)
   \   00000000   0xB510             PUSH     {R4,LR}
     76              uint8 pulse_loop;
     77              int16 pulse_temp_l;
     78              int16 pulsesum_l = 0;
   \   00000002   0x2400             MOVS     R4,#+0
     79              float pulse_l;
     80              static int16 leftspeed_queue[MOVINGAVERAGE_NUM]={0};
     81              static uint8 position=0;
     82              static uint8 init_flag = 0;
     83              /*用滑动平均法求得当前速度*/
     84              
     85          //    //节能一号
     86          //    pulse_temp_l = QD_GPT_cnv();   //记录当前采得的脉冲数
     87              
     88              //节能二号
     89              pulse_temp_l = QD_GPT_cnv();   //记录当前采得的脉冲数
   \   00000004   0x.... 0x....      BL       QD_GPT_cnv
     90              
     91              
     92              if(init_flag == 0)
   \   00000008   0x....             LDR.N    R1,??DataTable3_6
   \   0000000A   0x7809             LDRB     R1,[R1, #+0]
   \   0000000C   0x2900             CMP      R1,#+0
   \   0000000E   0xD10D             BNE.N    ??Get_Left_Speed_0
     93              {
     94                  for(pulse_loop = 0;pulse_loop<MOVINGAVERAGE_NUM; pulse_loop++)
   \   00000010   0x2100             MOVS     R1,#+0
   \   00000012   0xE004             B.N      ??Get_Left_Speed_1
     95                  {
     96                      leftspeed_queue[pulse_loop] = pulse_temp_l;
   \                     ??Get_Left_Speed_2: (+1)
   \   00000014   0x....             LDR.N    R2,??DataTable3_7
   \   00000016   0xB2C9             UXTB     R1,R1            ;; ZeroExt  R1,R1,#+24,#+24
   \   00000018   0xF822 0x0011      STRH     R0,[R2, R1, LSL #+1]
     97                  }
   \   0000001C   0x1C49             ADDS     R1,R1,#+1
   \                     ??Get_Left_Speed_1: (+1)
   \   0000001E   0xB2C9             UXTB     R1,R1            ;; ZeroExt  R1,R1,#+24,#+24
   \   00000020   0x2904             CMP      R1,#+4
   \   00000022   0xDBF7             BLT.N    ??Get_Left_Speed_2
     98                  init_flag = 1;
   \   00000024   0x2001             MOVS     R0,#+1
   \   00000026   0x....             LDR.N    R1,??DataTable3_6
   \   00000028   0x7008             STRB     R0,[R1, #+0]
   \   0000002A   0xE011             B.N      ??Get_Left_Speed_3
     99              }
    100              else
    101              {
    102                  leftspeed_queue[position] = pulse_temp_l;
   \                     ??Get_Left_Speed_0: (+1)
   \   0000002C   0x....             LDR.N    R1,??DataTable3_7
   \   0000002E   0x....             LDR.N    R2,??DataTable3_8
   \   00000030   0x7812             LDRB     R2,[R2, #+0]
   \   00000032   0xF821 0x0012      STRH     R0,[R1, R2, LSL #+1]
    103                  if(position == (MOVINGAVERAGE_NUM-1))
   \   00000036   0x....             LDR.N    R0,??DataTable3_8
   \   00000038   0x7800             LDRB     R0,[R0, #+0]
   \   0000003A   0x2803             CMP      R0,#+3
   \   0000003C   0xD103             BNE.N    ??Get_Left_Speed_4
    104                  {
    105                      position = 0;
   \   0000003E   0x2000             MOVS     R0,#+0
   \   00000040   0x....             LDR.N    R1,??DataTable3_8
   \   00000042   0x7008             STRB     R0,[R1, #+0]
   \   00000044   0xE004             B.N      ??Get_Left_Speed_3
    106                  }
    107                  else
    108                  {
    109                      position ++;
   \                     ??Get_Left_Speed_4: (+1)
   \   00000046   0x....             LDR.N    R0,??DataTable3_8
   \   00000048   0x7800             LDRB     R0,[R0, #+0]
   \   0000004A   0x1C40             ADDS     R0,R0,#+1
   \   0000004C   0x....             LDR.N    R1,??DataTable3_8
   \   0000004E   0x7008             STRB     R0,[R1, #+0]
    110                  }
    111              }
    112              for(pulse_loop = 0;pulse_loop<MOVINGAVERAGE_NUM; pulse_loop++)
   \                     ??Get_Left_Speed_3: (+1)
   \   00000050   0x2100             MOVS     R1,#+0
   \   00000052   0xE005             B.N      ??Get_Left_Speed_5
    113              {
    114                  pulsesum_l += leftspeed_queue[pulse_loop];
   \                     ??Get_Left_Speed_6: (+1)
   \   00000054   0x....             LDR.N    R0,??DataTable3_7
   \   00000056   0xB2C9             UXTB     R1,R1            ;; ZeroExt  R1,R1,#+24,#+24
   \   00000058   0xF830 0x0011      LDRH     R0,[R0, R1, LSL #+1]
   \   0000005C   0x1904             ADDS     R4,R0,R4
    115              }
   \   0000005E   0x1C49             ADDS     R1,R1,#+1
   \                     ??Get_Left_Speed_5: (+1)
   \   00000060   0xB2C9             UXTB     R1,R1            ;; ZeroExt  R1,R1,#+24,#+24
   \   00000062   0x2904             CMP      R1,#+4
   \   00000064   0xDBF6             BLT.N    ??Get_Left_Speed_6
    116              
    117              gl_left_encoder_count += pulsesum_l;
   \   00000066   0x....             LDR.N    R0,??DataTable3_9
   \   00000068   0x6800             LDR      R0,[R0, #+0]
   \   0000006A   0xFA00 0xF084      SXTAH    R0,R0,R4
   \   0000006E   0x....             LDR.N    R1,??DataTable3_9
   \   00000070   0x6008             STR      R0,[R1, #+0]
    118              
    119              pulse_l = (float)pulsesum_l/MOVINGAVERAGE_NUM;
   \   00000072   0xB224             SXTH     R4,R4            ;; SignExt  R4,R4,#+16,#+16
   \   00000074   0x0020             MOVS     R0,R4
   \   00000076   0x.... 0x....      BL       __aeabi_i2f
   \   0000007A   0xF05F 0x4181      MOVS     R1,#+1082130432
   \   0000007E   0x.... 0x....      BL       __aeabi_fdiv
    120          
    121              gf_left_speed =(float)(pulse_l/(float)(PULSE_PER_METRE_L*SPD_UPDATE_PERIOD_S));   
   \   00000082   0x....             LDR.N    R1,??DataTable3_10  ;; 0x44fa1917
   \   00000084   0x.... 0x....      BL       __aeabi_fdiv
   \   00000088   0x....             LDR.N    R1,??DataTable3_11
   \   0000008A   0x6008             STR      R0,[R1, #+0]
    122          }
   \   0000008C   0xBD10             POP      {R4,PC}          ;; return

   \                                 In section .bss, align 4
   \                     `Get_Left_Speed::leftspeed_queue`:
   \   00000000                      DS8 8

   \                                 In section .bss, align 1
   \                     `Get_Left_Speed::position`:
   \   00000000                      DS8 1

   \                                 In section .bss, align 1
   \                     `Get_Left_Speed::init_flag`:
   \   00000000                      DS8 1
    123          
    124          /*===============================================================
    125          	@brief     获得速度
    126          ==================================================================*/

   \                                 In section .text, align 2, keep-with-next
    127          void Get_Car_Speed()
    128          {
   \                     Get_Car_Speed: (+1)
   \   00000000   0xB580             PUSH     {R7,LR}
    129              Get_Right_Speed();
   \   00000002   0x.... 0x....      BL       Get_Right_Speed
    130              Get_Left_Speed();
   \   00000006   0x.... 0x....      BL       Get_Left_Speed
    131              gf_car_encoder_value = (gf_right_speed + gf_left_speed)/2;    //得到当前编码器返回速度，速度单位：m/s
   \   0000000A   0x....             LDR.N    R0,??DataTable3_5
   \   0000000C   0x6801             LDR      R1,[R0, #+0]
   \   0000000E   0x....             LDR.N    R0,??DataTable3_11
   \   00000010   0x6800             LDR      R0,[R0, #+0]
   \   00000012   0x.... 0x....      BL       __aeabi_fadd
   \   00000016   0xF05F 0x4180      MOVS     R1,#+1073741824
   \   0000001A   0x.... 0x....      BL       __aeabi_fdiv
   \   0000001E   0x....             LDR.N    R1,??DataTable3_12
   \   00000020   0x6008             STR      R0,[R1, #+0]
    132          }
   \   00000022   0xBD01             POP      {R0,PC}          ;; return
    133          
    134          /*===============================================================
    135          	@brief     获得跑过的距离
    136          ==================================================================*/

   \                                 In section .text, align 2, keep-with-next
    137          void Get_Car_Distance()
    138          {
   \                     Get_Car_Distance: (+1)
   \   00000000   0xB510             PUSH     {R4,LR}
    139              float f_speed_temp;
    140              static float sf_car_distance = 0;
    141              static float sf_car_left_distance = 0;
    142              static float sf_car_right_distance = 0;
    143          
    144              Get_Car_Speed();
   \   00000002   0x.... 0x....      BL       Get_Car_Speed
    145              f_speed_temp = gf_car_encoder_value;
   \   00000006   0x....             LDR.N    R0,??DataTable3_12
   \   00000008   0x6804             LDR      R4,[R0, #+0]
    146              
    147              gl_car_speed = (int32)(gf_car_encoder_value * TO_CENTIMETRE);
   \   0000000A   0x....             LDR.N    R0,??DataTable3_12
   \   0000000C   0x6801             LDR      R1,[R0, #+0]
   \   0000000E   0x....             LDR.N    R0,??DataTable3_13  ;; 0x43480000
   \   00000010   0x.... 0x....      BL       __aeabi_fmul
   \   00000014   0x.... 0x....      BL       __aeabi_f2iz
   \   00000018   0x....             LDR.N    R1,??DataTable3_14
   \   0000001A   0x6008             STR      R0,[R1, #+0]
    148              
    149              sf_car_distance += f_speed_temp * PIT_1_PERIOD_MS;//路程单位：m
   \   0000001C   0xF05F 0x4081      MOVS     R0,#+1082130432
   \   00000020   0x0021             MOVS     R1,R4
   \   00000022   0x.... 0x....      BL       __aeabi_fmul
   \   00000026   0x....             LDR.N    R1,??DataTable3_15
   \   00000028   0x6809             LDR      R1,[R1, #+0]
   \   0000002A   0x.... 0x....      BL       __aeabi_fadd
   \   0000002E   0x....             LDR.N    R1,??DataTable3_15
   \   00000030   0x6008             STR      R0,[R1, #+0]
    150              sf_car_left_distance += gf_left_speed * PIT_1_PERIOD_MS;//路程单位：m
   \   00000032   0x....             LDR.N    R0,??DataTable3_11
   \   00000034   0x6801             LDR      R1,[R0, #+0]
   \   00000036   0xF05F 0x4081      MOVS     R0,#+1082130432
   \   0000003A   0x.... 0x....      BL       __aeabi_fmul
   \   0000003E   0x....             LDR.N    R1,??DataTable3_16
   \   00000040   0x6809             LDR      R1,[R1, #+0]
   \   00000042   0x.... 0x....      BL       __aeabi_fadd
   \   00000046   0x....             LDR.N    R1,??DataTable3_16
   \   00000048   0x6008             STR      R0,[R1, #+0]
    151              sf_car_right_distance += gf_right_speed * PIT_1_PERIOD_MS;//路程单位：m
   \   0000004A   0x....             LDR.N    R0,??DataTable3_5
   \   0000004C   0x6801             LDR      R1,[R0, #+0]
   \   0000004E   0xF05F 0x4081      MOVS     R0,#+1082130432
   \   00000052   0x.... 0x....      BL       __aeabi_fmul
   \   00000056   0x....             LDR.N    R1,??DataTable3_17
   \   00000058   0x6809             LDR      R1,[R1, #+0]
   \   0000005A   0x.... 0x....      BL       __aeabi_fadd
   \   0000005E   0x....             LDR.N    R1,??DataTable3_17
   \   00000060   0x6008             STR      R0,[R1, #+0]
    152              gl_car_running_distance = (int32)(sf_car_distance * PULSE_PER_CENTIMETRE);
   \   00000062   0x....             LDR.N    R0,??DataTable3_15
   \   00000064   0x6800             LDR      R0,[R0, #+0]
   \   00000066   0x.... 0x....      BL       __aeabi_f2d
   \   0000006A   0x....             LDR.N    R2,??DataTable3_18  ;; 0x9999999a
   \   0000006C   0x....             LDR.N    R3,??DataTable3_19  ;; 0x3fc99999
   \   0000006E   0x.... 0x....      BL       __aeabi_dmul
   \   00000072   0x.... 0x....      BL       __aeabi_d2iz
   \   00000076   0x....             LDR.N    R1,??DataTable3_20
   \   00000078   0x6008             STR      R0,[R1, #+0]
    153              gl_left_encoder_value = (int32)(sf_car_left_distance * PULSE_PER_CENTIMETRE);
   \   0000007A   0x....             LDR.N    R0,??DataTable3_16
   \   0000007C   0x6800             LDR      R0,[R0, #+0]
   \   0000007E   0x.... 0x....      BL       __aeabi_f2d
   \   00000082   0x....             LDR.N    R2,??DataTable3_18  ;; 0x9999999a
   \   00000084   0x....             LDR.N    R3,??DataTable3_19  ;; 0x3fc99999
   \   00000086   0x.... 0x....      BL       __aeabi_dmul
   \   0000008A   0x.... 0x....      BL       __aeabi_d2iz
   \   0000008E   0x....             LDR.N    R1,??DataTable3_21
   \   00000090   0x6008             STR      R0,[R1, #+0]
    154              gl_right_encoder_value = (int32)(sf_car_right_distance * PULSE_PER_CENTIMETRE);
   \   00000092   0x....             LDR.N    R0,??DataTable3_17
   \   00000094   0x6800             LDR      R0,[R0, #+0]
   \   00000096   0x.... 0x....      BL       __aeabi_f2d
   \   0000009A   0x....             LDR.N    R2,??DataTable3_18  ;; 0x9999999a
   \   0000009C   0x....             LDR.N    R3,??DataTable3_19  ;; 0x3fc99999
   \   0000009E   0x.... 0x....      BL       __aeabi_dmul
   \   000000A2   0x.... 0x....      BL       __aeabi_d2iz
   \   000000A6   0x....             LDR.N    R1,??DataTable3_22
   \   000000A8   0x6008             STR      R0,[R1, #+0]
    155          }
   \   000000AA   0xBD10             POP      {R4,PC}          ;; return

   \                                 In section .bss, align 4
   \                     `Get_Car_Distance::sf_car_distance`:
   \   00000000                      DS8 4

   \                                 In section .bss, align 4
   \                     `Get_Car_Distance::sf_car_left_distance`:
   \   00000000                      DS8 4

   \                                 In section .bss, align 4
   \                     `Get_Car_Distance::sf_car_right_distance`:
   \   00000000                      DS8 4

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable3:
   \   00000000   0x........         DC32     `Get_Right_Speed::init_flag`

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable3_1:
   \   00000000   0x........         DC32     `Get_Right_Speed::rightspeed_queue`

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable3_2:
   \   00000000   0x........         DC32     `Get_Right_Speed::position`

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable3_3:
   \   00000000   0x........         DC32     gl_right_encoder_count

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable3_4:
   \   00000000   0x43783C6A         DC32     0x43783c6a

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable3_5:
   \   00000000   0x........         DC32     gf_right_speed

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable3_6:
   \   00000000   0x........         DC32     `Get_Left_Speed::init_flag`

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable3_7:
   \   00000000   0x........         DC32     `Get_Left_Speed::leftspeed_queue`

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable3_8:
   \   00000000   0x........         DC32     `Get_Left_Speed::position`

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable3_9:
   \   00000000   0x........         DC32     gl_left_encoder_count

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable3_10:
   \   00000000   0x44FA1917         DC32     0x44fa1917

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable3_11:
   \   00000000   0x........         DC32     gf_left_speed

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable3_12:
   \   00000000   0x........         DC32     gf_car_encoder_value

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable3_13:
   \   00000000   0x43480000         DC32     0x43480000

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable3_14:
   \   00000000   0x........         DC32     gl_car_speed

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable3_15:
   \   00000000   0x........         DC32     `Get_Car_Distance::sf_car_distance`

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable3_16:
   \   00000000   0x........         DC32     `Get_Car_Distance::sf_car_left_distance`

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable3_17:
   \   00000000   0x........         DC32     `Get_Car_Distance::sf_car_right_distance`

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable3_18:
   \   00000000   0x9999999A         DC32     0x9999999a

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable3_19:
   \   00000000   0x3FC99999         DC32     0x3fc99999

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable3_20:
   \   00000000   0x........         DC32     gl_car_running_distance

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable3_21:
   \   00000000   0x........         DC32     gl_left_encoder_value

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable3_22:
   \   00000000   0x........         DC32     gl_right_encoder_value

   Maximum stack usage in bytes:

   .cstack Function
   ------- --------
       8   Get_Car_Distance
         8   -> Get_Car_Speed
         8   -> __aeabi_d2iz
         8   -> __aeabi_dmul
         8   -> __aeabi_f2d
         8   -> __aeabi_f2iz
         8   -> __aeabi_fadd
         8   -> __aeabi_fmul
       8   Get_Car_Speed
         8   -> Get_Left_Speed
         8   -> Get_Right_Speed
         8   -> __aeabi_fadd
         8   -> __aeabi_fdiv
       8   Get_Left_Speed
         8   -> QD_GPT_cnv
         8   -> __aeabi_fdiv
         8   -> __aeabi_i2f
       8   Get_Right_Speed
         8   -> PLACC_GPT_cnv
         8   -> __aeabi_fdiv
         8   -> __aeabi_i2f


   Section sizes:

   Bytes  Function/Label
   -----  --------------
       4  ??DataTable3
       4  ??DataTable3_1
       4  ??DataTable3_10
       4  ??DataTable3_11
       4  ??DataTable3_12
       4  ??DataTable3_13
       4  ??DataTable3_14
       4  ??DataTable3_15
       4  ??DataTable3_16
       4  ??DataTable3_17
       4  ??DataTable3_18
       4  ??DataTable3_19
       4  ??DataTable3_2
       4  ??DataTable3_20
       4  ??DataTable3_21
       4  ??DataTable3_22
       4  ??DataTable3_3
       4  ??DataTable3_4
       4  ??DataTable3_5
       4  ??DataTable3_6
       4  ??DataTable3_7
       4  ??DataTable3_8
       4  ??DataTable3_9
     172  Get_Car_Distance
      36  Get_Car_Speed
     142  Get_Left_Speed
     144  Get_Right_Speed
       1  init_flag
       1  init_flag
       8  leftspeed_queue
       1  position
       1  position
       8  rightspeed_queue
       4  sf_car_distance
       4  sf_car_left_distance
       4  sf_car_right_distance

 
  32 bytes in section .bss
 586 bytes in section .text
 
 586 bytes of CODE memory
  32 bytes of DATA memory

Errors: none
Warnings: none
